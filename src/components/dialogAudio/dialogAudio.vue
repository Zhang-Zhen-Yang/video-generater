/*
 * @Author: zhangzhenyang 
 * @Date: 2019-01-22 14:25:43 
 * @Last Modified by: zhangzhenyang
 * @Last Modified time: yyyy-01-dd 14:26:19
 */

<template>
  <modal-dialog @dismiss="dismiss" @confirm="dismiss" title="选择音频">
    
    <!--音乐列表  content-->
    <div class="dialog-audio-content-wrap" slot="content" >
      <div class="dialog-audio-content scrollbar-overwrite">
        <div style="padding: 5px;">
          <!--
          <file-input :accept="accept" @change="change" :autoClear="false"></file-input>
          <button class="btn primary" @click="fetchAutio">获取audio</button>-->
          <div class="audio-item-wrap">
            <div class="audio-item">
              <aspect>
                <label style="display:block;width: 100%;height: 100%;" :class="['pointer', `m-icon-file` ,'m-icon']">
                  <file-input :accept="'.mp3,.wav'" @change="audioChange"></file-input>
                </label>
              </aspect>
              <div style="padding: 0 5px;text-align: center;font-weight: bold;">
                本地音频
              </div>
            </div>
          </div><div v-for="item,index in list" class="audio-item-wrap">
            <div class="audio-item">
              <aspect>
                <div style="width: 100%;height: 100%;" :class="['pointer', `m-icon-${item.icon}` ,'m-icon']" @click="selectAudio(item)">
                  
                </div>
              </aspect>
              <div style="padding: 0 5px;">
                {{ item.name }}
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
    


    <!--footer-->
    <table slot="footer">
      <tr>
        <td class="left">
        </td>
        <td>
        </td>
        <td class="right">
          <button class="btn white" @click="dismiss(false)">取消</button>
          <button v-if="false" class="btn primary" @click="confirm(true)">确定</button>
        </td>
      </tr>
    </table>
  </modal-dialog>
</template>

<script>
export default {
  name: 'dialog-audio',
  components: { },
  data () {
    return {
      accept: ['.mp3','.wav'].join(',')
    }
  },
  computed: {
    modal(){
      return this.$store.state.dialogAudio;
    },
    list() {
      return this.modal.list;
    }

  },
  methods: {
    dismiss(){
      this.modal.show = false;
    },
    confirm() {
      alert('yes');
    },
    change({file}) {
      // let file = file;
      this.$store.state.audio = file;
      let fileReader = new FileReader();
      fileReader.onload = function(){
        console.warn(fileReader.result);
      }
      fileReader.onerror = function(e){
        console.warn(e);
      }
      fileReader.readAsBinaryString(file);
      // console.log(file);
    },
    fetchAutio() {
      this.$store.state.dialogAudio.audioFrom = 'net';
      this.$store.dispatch('fetchAudio');
    },
    selectAudio(item) {
      // alert(item.url);
      this.$store.state.dialogAudio.audioFrom = 'net';
      this.$store.dispatch('fetchAudioNew', {item})
    },
    audioChange({file}) {
      let fileReader = new FileReader();
      fileReader.onload = ()=>{
        // alert('dddd');
        let data = fileReader.result.split(',');
        this.$store.state.dialogAudio.audioData = data[1];
        this.$store.state.dialogAudio.audioType = data[0];
        this.$store.state.dialogAudio.audioFrom = 'local';
        // console.warn(fileReader.result);
      }
      fileReader.onerror = function(e){
        console.warn(e);
      }
      fileReader.readAsDataURL(file);
    }


  },
  created() {
    
  }
}
</script>

<style lang="scss">
  .dialog-audio-content-wrap{
    padding: 50px 0 50px 0;
    height: 100%;
  }
  .dialog-audio-content{
    height: 100%;
    overflow: auto;
    text-align: left;
  }
  .audio-item-wrap{
    display: inline-block;
    width: 14.28%;
    height: 160px;
    padding: 5px;
    vertical-align: top;
  }
  .audio-item{
    width: 100%;
    height: 100%;
    // border: 2px solid #aaaaaa;
    font-size: 12px;
  }
  .modal-dialog-footer{
    background-color: white;
  }
  .m-icon{
    background-size: 70% auto;
    background-repeat: no-repeat;
    background-position: center;
    border:1px solid #efefef;
    background-color: #eee;
  }
  .m-icon-1{
    background-image: url("data:image/svg+xml,%3Csvg class='icon' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cdefs%3E%3Cstyle/%3E%3C/defs%3E%3Cpath d='M255.714 730.815c-60.393 14.715-98.857 62.261-85.91 106.196 12.945 43.936 72.4 67.622 132.791 52.907 60.394-14.715 98.858-62.261 85.912-106.196-12.946-43.935-72.399-67.624-132.793-52.907zm598.997-40.334c-12.947-43.935-72.4-67.622-132.794-52.907-60.393 14.716-98.857 62.26-85.911 106.196 12.946 43.936 72.4 67.622 132.792 52.908 60.393-14.716 98.858-62.262 85.913-106.197zm2.485-556.567l-428.939 85.635v111.12l428.939-85.635v-111.12z' fill='%23FFF'/%3E%3Cpath d='M428.257 219.55v111.12l428.939-85.635V133.914z' fill='%2386AEDD'/%3E%3Cpath d='M745.333 156.247v111.12l18.648-3.724V152.524l-18.648 3.723zM521.556 312.043l18.648-3.722V197.2l-18.648 3.722v111.12zm111.888-22.338l18.648-3.724V174.862l-18.648 3.723v111.12z'/%3E%3Cpath d='M894.46 112.214c.024-.38.057-.758.057-1.144 0-10.3-8.35-18.648-18.648-18.648a18.717 18.717 0 0 0-3.657.364v-.003L406.01 186.025c-8.528 1.697-14.96 9.206-14.987 18.227h-.029v516.271c-34.509-28.394-88.505-39.476-143.085-25.07-80.523 21.255-131.81 89.933-114.547 153.394 17.26 63.462 96.533 97.678 177.056 76.423 71.165-18.785 119.48-74.609 117.84-131.136V368.795l428.939-85.788v344.275c-34.51-28.394-88.505-39.477-143.084-25.07-80.524 21.256-131.81 89.932-114.547 153.395 17.26 63.462 96.533 97.677 177.056 76.422 71.164-18.786 119.481-74.609 117.84-131.138V112.214zM302.596 889.917c-60.392 14.715-119.846-8.971-132.792-52.907-12.947-43.935 25.519-91.48 85.911-106.196 60.394-14.716 119.847 8.972 132.794 52.907 12.944 43.936-25.52 91.48-85.913 106.196zm125.661-559.156v-111.15l237.034-47.407 191.904-38.381v111.15L428.257 330.76zM768.8 796.677c-60.392 14.715-119.846-8.972-132.792-52.908-12.947-43.935 25.518-91.48 85.911-106.196 60.394-14.715 119.847 8.972 132.794 52.907 12.944 43.936-25.52 91.482-85.913 106.197z'/%3E%3C/svg%3E");
  }
  /*.m-icon-2{
    background-image: url("data:image/svg+xml,%3Csvg class='icon' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cdefs%3E%3Cstyle/%3E%3C/defs%3E%3Cpath d='M224.051 799.949c-70.656 0-128 43.008-128 96.051s57.344 96.051 128 96.051 128-43.008 128-96.051-57.344-96.051-128-96.051zm575.898-128c-70.656 0-128 43.008-128 96.051s57.344 96.051 128 96.051 128-43.008 128-96.051-57.242-96.051-128-96.051z' fill='%23F0EEE2'/%3E%3Cpath d='M352.051 176.026V384L927.95 240.026V31.949z' fill='%23BBAA9C'/%3E%3Cpath d='M320 911.974h-48.026c-8.806 0-15.974 7.168-15.974 15.975s7.168 15.974 15.974 15.974H320c8.806 0 15.974-7.168 15.974-15.974s-7.168-15.975-15.974-15.975zM832 768h-48.026c-8.806 0-15.974 7.168-15.974 15.974s7.168 15.975 15.974 15.975H832c8.806 0 15.974-7.168 15.974-15.975S840.806 768 832 768zM560.026 143.974h-128c-8.807 0-15.975 7.168-15.975 15.975s7.168 15.974 15.975 15.974h128c8.806 0 15.974-7.168 15.974-15.974s-7.168-15.975-15.974-15.975zm-96.052 128H352.051c-8.806-.204-16.179 6.759-16.384 15.565s6.759 16.18 15.565 16.384h112.845c8.806-.205 15.77-7.577 15.565-16.384-.308-8.499-7.066-15.36-15.668-15.565zm176.026-64h-31.949c-8.806.205-15.77 7.578-15.565 16.384.205 8.5 7.066 15.36 15.565 15.565H640c8.806.205 16.18-6.758 16.384-15.565.205-8.806-6.758-16.179-15.565-16.384H640zM752.026 128c-8.807 0-15.975 7.168-15.975 15.974s7.168 15.975 15.975 15.975S768 152.78 768 143.974 760.832 128 752.026 128zm159.948 31.949H863.95c-8.807 0-15.975 7.168-15.975 15.974s7.168 15.975 15.975 15.975h48.025c8.807 0 15.975-7.168 15.975-15.975s-7.066-15.974-15.975-15.974zM192 864.05h-79.974c-8.807.205-15.77 7.578-15.565 16.384.205 8.5 7.065 15.36 15.565 15.565H192c8.806.205 16.18-6.758 16.384-15.565.205-8.806-6.758-16.179-15.565-16.384a1.13 1.13 0 0 0-.819 0z' fill='%23D8D5BA'/%3E%3Cpath d='M896 0c-5.222.102-10.445.717-15.462 2.048v-.102l-512 128v.204C340.07 137.216 320.102 162.714 320 192v601.6c-26.726-16.077-60.006-25.6-96.051-25.6C135.578 768 64 825.344 64 896s71.68 128 159.949 128S384 966.656 384 896V392.294l512-131.686V665.6c-26.726-16.077-60.006-25.6-96.051-25.6C711.68 640 640 697.344 640 768s71.68 128 159.949 128 159.949-57.344 159.949-128V64C960 28.672 931.328 0 896 0zM224.051 960C171.008 960 128 931.328 128 896s43.008-64 96.051-64 96.051 28.672 96.051 64-43.11 64-96.05 64zM799.95 832c-53.043 0-96.051-28.672-96.051-64s43.008-64 96.05-64S896 732.672 896 768s-43.008 64-96.051 64zM384 359.22V192.101l512-128v163.43L384 359.22z' fill='%235F4E56'/%3E%3C/svg%3E");
  }*/
  .m-icon-3{
    background-image: url("data:image/svg+xml,%3Csvg class='icon' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cdefs%3E%3Cstyle/%3E%3C/defs%3E%3Cpath d='M731.458 819.644c65.832 0 118.717-53.26 118.717-118.96 0-65.699-52.883-118.958-118.717-118.958s-119.202 53.26-119.202 118.958c0 65.7 53.368 118.96 119.202 118.96m-439.31 99.134c65.205 0 119.852-53.26 119.852-118.96s-54.647-118.96-119.853-118.96-118.067 53.26-118.067 118.96 52.86 118.96 118.067 118.96' fill='%23FFF200'/%3E%3Cpath d='M731.458 819.644c-65.834 0-119.202-53.26-119.202-118.96 0-65.699 53.368-118.958 119.202-118.958 60.138 0 109.461 44.446 117.547 102.217.321 10.793.512 16.908.527 17.355l.635-.02c-.318 65.426-53.075 118.366-118.71 118.366m-439.31 99.134c-65.206 0-118.067-53.26-118.067-118.96s52.86-118.96 118.067-118.96S412 734.118 412 799.818s-54.647 118.96-119.853 118.96M889.88 680.483c-2.28-76.595-10.349-361.951-10.349-561.384 0-16.427-6.912-30.052-19.988-39.401-25.562-18.278-73.944-18.849-152.25-1.797-57.14 12.443-116.62 31.711-146.99 42.09a1848.233 1848.233 0 0 1-12.968 4.358c-33.615 11.205-71.713 23.905-101.956 49.243-17.075 14.305-30.082 31.523-38.664 51.18-9.537 21.847-13.946 47.483-13.102 76.196 4.503 153.157 9.986 294.701 13.855 387.772a162.142 162.142 0 0 0-2.17-2.191c-14.781-14.59-31.946-26.059-51.017-34.091-19.787-8.334-40.693-12.56-62.134-12.56-21.488 0-42.353 4.25-62.015 12.628-18.95 8.075-35.955 19.622-50.543 34.321-14.566 14.677-26.005 31.773-33.998 50.812-8.275 19.713-12.472 40.626-12.472 62.159s4.197 42.446 12.472 62.159c7.993 19.039 19.432 36.134 33.997 50.811 14.589 14.699 31.594 26.247 50.544 34.322 19.66 8.38 40.527 12.628 62.015 12.628 21.442 0 42.347-4.226 62.134-12.56 19.071-8.033 36.236-19.502 51.016-34.09 14.861-14.666 26.552-31.736 34.753-50.737 8.566-19.849 12.91-40.888 12.91-62.533 0-.316-.01-.63-.012-.945l.313-.016c-.107-2.3-10.888-233.172-18.705-499.093-1.246-42.394 10.551-72.509 37.128-94.775 24.277-20.338 56.979-31.24 88.604-41.783a1811.13 1811.13 0 0 0 13.26-4.456c29.538-10.094 87.322-28.82 142.458-40.827 90.03-19.605 114.39-8.712 119.714-4.905 1.97 1.409 2.851 2.621 2.851 6.082 0 149.972 4.547 348.275 7.782 470.443-.607-.63-1.214-1.264-1.835-1.887-14.643-14.696-31.723-26.237-50.765-34.3-19.73-8.355-40.69-12.59-62.295-12.59-21.594 0-42.564 4.23-62.327 12.572-19.075 8.05-36.199 19.57-50.896 34.237-14.703 14.672-26.251 31.77-34.325 50.821-8.37 19.75-12.615 40.707-12.615 62.288 0 21.582 4.244 42.54 12.615 62.29 8.074 19.049 19.622 36.147 34.325 50.821 14.697 14.666 31.82 26.185 50.896 34.237 19.763 8.342 40.733 12.572 62.327 12.572 21.606 0 42.565-4.236 62.295-12.59 19.042-8.064 36.122-19.604 50.765-34.302 14.623-14.674 26.102-31.78 34.12-50.841 8.292-19.712 12.497-40.636 12.497-62.187 0-6.802-.422-13.543-1.255-20.202'/%3E%3C/svg%3E");
  }
  .m-icon-4{
    background-image: url("data:image/svg+xml,%3Csvg class='icon' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cdefs%3E%3Cstyle/%3E%3C/defs%3E%3Cpath d='M360.533 192c-14.933 0-29.866-10.667-32-27.733-2.133-14.934 10.667-32 27.734-36.267l576-96c17.066-2.133 34.133 8.533 36.266 25.6 2.134 17.067-8.533 34.133-25.6 36.267l-576 98.133h-6.4z' fill='%23543E3E'/%3E%3Cpath d='M360.533 853.333c-17.066 0-32-14.933-32-32V160c0-17.067 14.934-32 32-32s32 14.933 32 32v659.2c0 19.2-12.8 34.133-32 34.133zM938.667 704c-17.067 0-32-14.933-32-32V64c0-17.067 14.933-32 32-32s32 14.933 32 32v608c0 17.067-14.934 32-32 32z' fill='%23543E3E'/%3E%3Cpath d='M206.933 1024c-38.4 0-74.666-10.667-106.666-34.133-83.2-57.6-104.534-174.934-46.934-258.134S228.267 627.2 311.467 684.8C394.667 742.4 416 859.733 358.4 942.933c-27.733 40.534-70.4 68.267-119.467 76.8-10.666 4.267-21.333 4.267-32 4.267zm0-307.2c-38.4 0-76.8 17.067-100.266 51.2-38.4 55.467-25.6 130.133 29.866 168.533 25.6 19.2 59.734 25.6 91.734 19.2 32-6.4 59.733-23.466 78.933-49.066 38.4-55.467 25.6-130.134-29.867-168.534-21.333-12.8-44.8-21.333-70.4-21.333zm578.134 153.6c-38.4 0-74.667-10.667-106.667-34.133-40.533-27.734-68.267-70.4-76.8-119.467-8.533-49.067 2.133-98.133 29.867-138.667C689.067 494.933 806.4 473.6 889.6 531.2c40.533 27.733 68.267 70.4 76.8 119.467 8.533 49.066-2.133 98.133-29.867 138.666-27.733 40.534-70.4 68.267-119.466 76.8-10.667 4.267-21.334 4.267-32 4.267zm0-307.2c-38.4 0-76.8 17.067-100.267 51.2-19.2 25.6-25.6 59.733-19.2 91.733 6.4 32 23.467 59.734 49.067 78.934 25.6 19.2 59.733 25.6 91.733 19.2 32-6.4 59.733-23.467 78.933-49.067 19.2-25.6 25.6-59.733 19.2-91.733s-23.466-59.734-49.066-78.934c-21.334-12.8-46.934-21.333-70.4-21.333z' fill='%23FFBB12'/%3E%3Cpath d='M377.6 339.2c-14.933 0-29.867-10.667-32-27.733-2.133-17.067 8.533-34.134 27.733-36.267l550.4-83.2c17.067-2.133 34.134 8.533 36.267 27.733 2.133 17.067-8.533 34.134-27.733 36.267l-550.4 83.2H377.6z' fill='%23543E3E'/%3E%3C/svg%3E");
  }
  .m-icon-5{
    background-image: url("data:image/svg+xml,%3Csvg class='icon' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cdefs%3E%3Cstyle/%3E%3C/defs%3E%3Cpath d='M640 665.9a166.4 166.4 0 1 0 332.8 0 166.4 166.4 0 1 0-332.8 0zM51.19999999999999 845.1a166.4 166.4 0 1 0 332.8 0 166.4 166.4 0 1 0-332.8 0z' fill='%234EEAAB'/%3E%3Cpath d='M902.2 16.4L339 247.4c-19.2 7.9-31.8 26.6-31.8 47.4V705c-25.9-16.6-56.6-26.3-89.6-26.3-91.9 0-166.4 74.5-166.4 166.4s74.5 166.4 166.4 166.4c91 0 164.9-73.2 166.3-163.9l.1-.1V519.4l512-218.3v224.7c-25.9-16.6-56.6-26.3-89.6-26.3-91.9 0-166.4 74.5-166.4 166.4s74.5 166.4 166.4 166.4 166.4-74.5 166.4-166.4c0-2.1-.2-4.2-.3-6.3l.3-.2V63.8c0-36.4-36.9-61.2-70.6-47.4zM217.6 934.7c-49.4 0-89.6-40.2-89.6-89.6 0-49.4 40.2-89.6 89.6-89.6s89.6 40.2 89.6 89.6c0 49.4-40.2 89.6-89.6 89.6zM384 437.9V314.6L896 96.3v123.3L384 437.9zm422.4 317.6c-49.4 0-89.6-40.2-89.6-89.6 0-49.4 40.2-89.6 89.6-89.6s89.6 40.2 89.6 89.6c0 49.4-40.2 89.6-89.6 89.6z' fill='%23454563'/%3E%3C/svg%3E");
  }
  .m-icon-file{
    background-image: url("data:image/svg+xml,%3Csvg class='icon' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cdefs%3E%3Cstyle/%3E%3C/defs%3E%3Cpath d='M922 910.5H102c-21.9 0-39.6-17.7-39.6-39.6V224.3c0-21.9 17.7-39.6 39.6-39.6h820c21.9 0 39.6 17.7 39.6 39.6v646.6c0 21.8-17.8 39.6-39.6 39.6z' fill='%23FFA000'/%3E%3Cpath d='M512 354.9H62.4V153.1c0-21.9 17.7-39.6 39.6-39.6h307.7c17.5 0 32.9 11.4 37.9 28.2L512 354.9z' fill='%23FFA000'/%3E%3Cpath d='M859.7 861.3H164.3c-21.9 0-39.6-17.7-39.6-39.6v-537c0-21.9 17.7-39.6 39.6-39.6h695.5c21.9 0 39.6 17.7 39.6 39.6v537c0 21.8-17.8 39.6-39.7 39.6z' fill='%23FFF'/%3E%3Cpath d='M922 910.5H102c-21.9 0-39.6-17.7-39.6-39.6V359.1c0-21.9 17.7-39.6 39.6-39.6h820c21.9 0 39.6 17.7 39.6 39.6v511.8c0 21.8-17.8 39.6-39.6 39.6z' fill='%23FFCA28'/%3E%3Cpath d='M852.8 319.5L612.4 738.8l-209.8-279L147 471.3l97.5 130.1-97.5 4.4 228.2 304.6H922c21.9 0 39.6-17.7 39.6-39.6V463.3L852.8 319.5z' fill='%23FFB806'/%3E%3Cpath d='M382.8 483.1H165.1c-10.9 0-19.8-8.9-19.8-19.8s8.9-19.8 19.8-19.8h217.7c10.9 0 19.8 8.9 19.8 19.8s-8.9 19.8-19.8 19.8zm0 134.5H165.1c-10.9 0-19.8-8.9-19.8-19.8s8.9-19.8 19.8-19.8h217.7c10.9 0 19.8 8.9 19.8 19.8 0 11-8.9 19.8-19.8 19.8z' fill='%23FFF8E1'/%3E%3Cpath d='M837.4 762.9l-107-70.7c-3.3-2.2-7.6-2.2-10.9 0l-107 70.7c-6.6 4.4-15.4-.4-15.4-8.3V318.1c0-10.9 8.5-19.8 18.9-19.8h217.8c10.4 0 18.9 8.9 18.9 19.8v436.5c.1 7.9-8.7 12.7-15.3 8.3z' fill='%23F44336'/%3E%3C/svg%3E");
  }
  .m-icon-file input{
    display: none;
  }
</style>
